<!-- Category Grid with Modern Card Design -->
<section class="py-12 bg-background">
    <div class="container mx-auto px-4 lg:px-6">
        <!-- Section Header -->
        <div class="mb-8">
            <h2 class="text-2xl lg:text-3xl font-bold text-foreground mb-2">
                Shop by Category
            </h2>
            <p class="text-muted-foreground">Discover our curated collections</p>
        </div>

        <!-- Categories Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            {% for category in categories %}
                <article class="group">
                    <div class="bg-card rounded-2xl border border-border overflow-hidden
                                hover:shadow-2xl hover:border-primary/50
                                transition-all duration-500 h-full flex flex-col">
                        <!-- Card Header with Gradient -->
                        <div class="relative bg-linear-to-br from-primary/5 via-accent/5 to-transparent 
                                    p-6 border-b border-border/50">
                            <div class="flex items-center justify-between mb-1">
                                <h3 class="text-lg font-bold text-foreground group-hover:text-primary 
                                           transition-colors duration-300">
                                    {{ category.name }}
                                </h3>
                                <div class="w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center
                                            group-hover:bg-primary group-hover:scale-110 
                                            transition-all duration-300">
                                    <twig:ux:icon name="tabler:arrow-right" 
                                                 class="w-5 h-5 text-primary group-hover:text-primary-foreground 
                                                        transition-colors"/>
                                </div>
                            </div>
                            <p class="text-xs text-muted-foreground">
                                Explore {{ category.subCategories|length }} collections
                            </p>
                        </div>
                        
                        <!-- Subcategories Grid -->
                        <div class="p-4 flex-1">
                            <div class="grid grid-cols-2 gap-3 h-full">
                                {% for subCategory in category.subCategories|slice(0, 4) %}
                                    <a href="#" class="group/sub flex flex-col">
                                        <div class="relative aspect-square bg-linear-to-br from-muted to-muted/50 
                                                    rounded-xl overflow-hidden
                                                    ring-1 ring-border/50
                                                    group-hover/sub:ring-2 group-hover/sub:ring-primary/50
                                                    transition-all duration-300">
                                            {% if subCategory.image %}
                                                <img 
                                                    src="{{ asset('uploads/subcategories/' ~ subCategory.image) }}" 
                                                    alt="{{ subCategory.name }}"
                                                    class="w-full h-full object-cover 
                                                           group-hover/sub:scale-110 
                                                           transition-transform duration-700 ease-out"
                                                    loading="lazy"
                                                >
                                                <!-- Shine effect on hover -->
                                                <div class="absolute inset-0 bg-linear-to-tr from-transparent via-background/0 to-transparent
                                                            group-hover/sub:via-background/20
                                                            transition-all duration-700"></div>
                                            {% else %}
                                                <div class="w-full h-full flex items-center justify-center">
                                                    <twig:ux:icon name="tabler:photo" class="w-10 h-10 text-muted-foreground/30"/>
                                                </div>
                                            {% endif %}
                                            
                                            <!-- Item badge (optional) -->
                                            <div class="absolute top-2 right-2 opacity-0 group-hover/sub:opacity-100 
                                                        transition-opacity duration-300">
                                                <div class="w-6 h-6 bg-primary rounded-full flex items-center justify-center">
                                                    <twig:ux:icon name="tabler:plus" class="w-4 h-4 text-primary-foreground"/>
                                                </div>
                                            </div>
                                        </div>
                                        <p class="mt-2 text-xs font-medium text-foreground/70 
                                                  group-hover/sub:text-primary 
                                                  transition-colors duration-200
                                                  line-clamp-2 text-center leading-snug">
                                            {{ subCategory.name }}
                                        </p>
                                    </a>
                                {% endfor %}
                            </div>
                        </div>
                        
                        <!-- Card Footer -->
                        <div class="p-4 pt-0">
                            <a href="#" class="flex items-center justify-center gap-2 w-full
                                              py-3 px-4 rounded-lg
                                              bg-linear-to-r from-primary/5 to-accent/5
                                              hover:from-primary/10 hover:to-accent/10
                                              border border-border/50
                                              text-sm font-semibold text-primary
                                              group-hover:border-primary/50
                                              transition-all duration-300">
                                <span>View All</span>
                                <twig:ux:icon name="tabler:arrow-narrow-right" 
                                             class="w-5 h-5 group-hover:translate-x-1 transition-transform"/>
                            </a>
                        </div>
                    </div>
                </article>
            {% endfor %}
        </div>

        <!-- View More Categories Button -->
        <div class="mt-12 text-center">
            <button class="inline-flex items-center gap-2 px-8 py-4 
                           bg-card hover:bg-muted
                           border-2 border-border hover:border-primary
                           rounded-xl font-semibold text-foreground
                           transition-all duration-300
                           hover:shadow-lg hover:scale-105 active:scale-95">
                <twig:ux:icon name="tabler:grid-dots" class="w-5 h-5"/>
                <span>Browse All Categories</span>
                <twig:ux:icon name="tabler:chevron-down" class="w-4 h-4"/>
            </button>
        </div>
    </div>
</section>

<style>
@keyframes progress {
    from { transform: scaleX(0); }
    to { transform: scaleX(1); }
}

.animate-progress {
    animation: progress 5s linear infinite;
}
</style>